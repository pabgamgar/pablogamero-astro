---
import MainLayout from "@/layouts/MainLayout.astro";
import Button from "@/components/Button.astro";
import { getCollection } from "astro:content";
const portfolio = await getCollection("portfolio");
import Showcase from "@/components/Showcase";
const productTypes = ["App", "Website", "Product", "Web App", "SaaS"];
const businessTypes = ["Business", "Startup"];
---

<MainLayout title="Work" desc="">
  <div class="container">
    <Showcase client:load>
      <h1 class="hidden">My Work</h1>
      <div slot="favourites" class="content">
        {
          portfolio
            .filter((item: any) => item.data.pinned)
            .map((item: any) => (
              <div class="flex gap-12 items-center even:flex-row-reverse">
                <img
                  src={`/images/${item.slug}-show.webp`}
                  class="size-80 object-contain"
                />
                <div class="flex flex-col gap-6">
                  <h3>{item.data.name}</h3>
                  <p>{item.body}</p>
                  <div class="flex gap-4">
                    <Button href={item.data.url} external>
                      {item.data.type == "App" ? "Download" : "Visit"}
                    </Button>
                    <Button href={`/en/work/${item.slug}`} variant="outlined">
                      Learn More
                    </Button>
                  </div>
                </div>
              </div>
            ))
        }
      </div>
      <div slot="all" class="content">
        {
          portfolio.map((item: any) => (
            <div class="flex gap-12 items-center even:flex-row-reverse">
              <img
                src={`/images/${item.slug}-show.webp`}
                class="size-80 object-contain"
              />
              <div class="flex flex-col gap-6">
                <h3>{item.data.name}</h3>
                <p>{item.body}</p>
                <div class="flex gap-4">
                  <Button href={item.data.url} external>
                    {item.data.type == "App" ? "Download" : "Visit"}
                  </Button>
                  <Button href={`/en/work/${item.slug}`} variant="outlined">
                    Learn More
                  </Button>
                </div>
              </div>
            </div>
          ))
        }
      </div>
      <div slot="products" class="content">
        {
          portfolio
            .filter((item: any) => productTypes.includes(item.data.type))
            .map((item: any) => (
              <div class="flex gap-12 items-center even:flex-row-reverse">
                <img
                  src={`/images/${item.slug}-show.webp`}
                  class="size-80 object-contain"
                />
                <div class="flex flex-col gap-6">
                  <h3>{item.data.name}</h3>
                  <p>{item.body}</p>
                  <div class="flex gap-4">
                    <Button href={item.data.url} external>
                      {item.data.type == "App" ? "Download" : "Visit"}
                    </Button>
                    <Button href={`/en/work/${item.slug}`} variant="outlined">
                      Learn More
                    </Button>
                  </div>
                </div>
              </div>
            ))
        }
      </div>
      <div slot="businesses" class="content">
        {
          portfolio
            .filter((item: any) => businessTypes.includes(item.data.type))
            .map((item: any) => (
              <div class="flex gap-12 items-center even:flex-row-reverse">
                <img
                  src={`/images/${item.slug}-show.webp`}
                  class="size-80 object-contain"
                />
                <div class="flex flex-col gap-6">
                  <h3>{item.data.name}</h3>
                  <p>{item.body}</p>
                  <div class="flex gap-4">
                    <Button href={item.data.url} external>
                      {item.data.type == "App" ? "Download" : "Visit"}
                    </Button>
                    <Button href={`/en/work/${item.slug}`} variant="outlined">
                      Learn More
                    </Button>
                  </div>
                </div>
              </div>
            ))
        }
      </div>
    </Showcase>
  </div>
</MainLayout>

<style>
  .content {
    gap: 1rem;
    animation: none;
  }
  .container {
    animation: transitionIn 1s;
    position: relative;
    width: fit-content;
    align-self: center;
    display: flex;
    flex-direction: column;
    gap: 1rem;
    height: 80vh;
  }
</style>
