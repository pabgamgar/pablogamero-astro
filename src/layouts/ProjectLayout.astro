---
import type { WorkItem } from "@/content/config";
import type { Render, RenderedContent } from "astro:content";
import MainLayout from "./MainLayout.astro";

interface Props {
  project: {
    id: string;
    render(): Render[".md"];
    slug: string;
    body: string;
    collection: "work" | "trabajo";
    data: WorkItem;
    rendered?: RenderedContent;
    filePath?: string;
  };
}

const { project } = Astro.props;
const { slug, data } = project;
const { name, title, description, featured, links } = data;
---

<MainLayout
  title={name}
  desc={description[0]}
  kw={name}
  canon={`work/${slug}`}
  alt={`es/trabajo/${slug}`}
>
  <article
    class="text-white max-w-4xl flex flex-col gap-8 self-center px-4 sm:px-8 md:px-12 py-4"
  >
    <section
      id="hero"
      class="w-full flex flex-col gap-4"
    >
      <h1 class="font-bold text-pretty flex gap-4 items-center">
        {
          featured && (
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="#fde047"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-star size-5 text-yellow-300"
            >
              <path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z" />
            </svg>
          )
        }{name}{title && `: ${title}`}
      </h1>
      <p class="text-pretty text-neutral-300">{description}</p>
      <div class="w-full aspect-video overflow-clip rounded-xl">
        <img
          src={`/images/${slug}-show.webp`}
          alt={name}
          class="object-cover w-full h-full"
          transition:name={`img-${slug}`}
        />
      </div>
      <div class="flex gap-4">
        {
          Object.entries(links).map(([name, link]) => (
            <a
              href={link}
              class="flex items-center justify-center px-3 py-1 bg-neutral-800 border border-neutral-600 text-sm rounded-md hover:bg-neutral-600 transition-colors duration-500"
            >
              {name}
            </a>
          ))
        }
      </div>
    </section>
    <section
      id="content"
      class="flex flex-col gap-4"
    >
      <slot />
    </section>
  </article>
</MainLayout>
