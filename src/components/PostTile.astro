---
import type { WorkItem } from "@/content/config";
const { post, lang, projectMeta = [] } = Astro.props;
const formattedDate =
    lang === "es"
        ? post.data.date.toLocaleDateString("es-ES", {
              day: "2-digit",
              month: "2-digit",
              year: "2-digit",
          })
        : post.data.date.toLocaleDateString("en-US", {
              year: "numeric",
              month: "long",
              day: "numeric",
          });
const projectLabel = projectMeta
    .map((project: WorkItem) => project.name)
    .join(", ");
---

<article
    class="rounded-xl transition-all py-4 hover:px-6 hover:shadow-xl duration-500 w-full"
>
    <a
        href={`/${lang === "es" ? "es/blog" : "blog"}/${post.slug}`}
        class="no-underline flex flex-col items-start gap-2"
    >
        <div class="text-sm opacity-70" transition:name={`postDate`}>
            {
                projectLabel ? (
                    <span>
                        {formattedDate} â€¢ {projectLabel}
                    </span>
                ) : (
                    <span>{formattedDate}</span>
                )
            }
        </div>
        <h2 class="text-2xl" transition:name={`title-${post.slug}`}>
            {post.data.title}
        </h2>
        <p class="post-description">
            {post.data.description}
        </p>
        {
            post.data.tags && post.data.tags.length > 0 && (
                <div class="post-tags">
                    {post.data.tags.map((tag: string) => (
                        <span class="tag">{tag}</span>
                    ))}
                </div>
            )
        }
    </a>
</article>

<style>
    .post-title {
        font-size: 1.5rem;
        font-weight: 600;
        margin-bottom: 12px;
        line-height: 1.3;
    }

    .post-description {
        opacity: 0.9;
        line-height: 1.6;
        margin-bottom: 12px;
    }

    .post-tags {
        display: flex;
        gap: 6px;
        flex-wrap: wrap;
    }

    .post-project-inline {
        margin-left: 6px;
        opacity: 0.75;
    }

    .tag {
        padding: 4px 12px;
        background-color: rgba(0, 0, 0, 0.1);
        border-radius: 100px;
        font-size: 0.85rem;
        opacity: 0.8;
    }
</style>
