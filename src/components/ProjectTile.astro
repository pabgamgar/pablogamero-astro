---
import type { WorkItem } from "@/content/config";
import type { Render, RenderedContent } from "astro:content";
import StageBadge from "@/components/StageBadge.astro";
import { Image } from "astro:assets";

interface Props {
    project: {
        id: string;
        render(): Render[".md"];
        slug: string;
        body: string;
        collection: "projects" | "proyectos";
        data: WorkItem;
        rendered?: RenderedContent;
        filePath?: string;
    };
    lang: "en" | "es";
}

const { project, lang } = Astro.props;
const { slug, data } = project;
const { name, description, stage } = data;
---

<a
    href={lang === "en" ? `/projects/${slug}` : `/es/proyectos/${slug}`}
    class="flex flex-col col-span-1 gap-3 text-white group projecttile"
>
    <div class="w-full h-auto aspect-video rounded-lg overflow-hidden bg-black">
        <Image
            src={`/images/${slug}-show.webp`}
            alt=""
            class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500 object-top"
            transition:name={`img-${slug}`}
            width={1280}
            height={720}
            fetchpriority="high"
            loading="lazy"
        />
    </div>

    <div class="flex flex-col gap-2">
        <h3 class="flex gap-2 items-center">
            {name}<StageBadge stage={stage} />
        </h3>
        <p class="text-pretty">{description}</p>
    </div>
</a>
